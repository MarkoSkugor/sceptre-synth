(this["webpackJsonpsceptre-synth"]=this["webpackJsonpsceptre-synth"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var s=i(3),a=i.n(s),n=i(11),c=i.n(n),r=(i(16),i(5)),l=i(2),o=i(7),u=i(6),h=i(4),d=(i(17),i(18),i(1)),v=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).state={active:!1},s.handleButtonClick=s.handleButtonClick.bind(Object(l.a)(s)),s}return Object(r.a)(i,[{key:"handleButtonClick",value:function(e){var t=this;this.props.onClick(e),this.setState({active:!0}),this.timeout=setTimeout((function(){t.setState({active:!1})}),50)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){return Object(d.jsx)("div",{className:"button__container",children:Object(d.jsx)("button",{disabled:this.props.disabled,type:"button",className:"button ".concat(this.state.active?"active":""),onClick:this.handleButtonClick,children:this.props.children})})}}]),i}(a.a.Component);v.defaultProps={disabled:!1,onClick:void 0};i(20);var f={a:"c",w:"cSharp",s:"d",e:"dSharp",d:"e",f:"f",t:"fSharp",g:"g",y:"gSharp",h:"a",u:"aSharp",j:"b",k:"c",o:"cSharp",l:"d",p:"dSharp"},b=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){var i=t.key;if(f[i]){var s=e.props.startingOctave;-1!=="kolp".indexOf(i)&&(s+=1),e.props.onKeyPressed(s,f[i]),e.triggerKeyPressActiveState(i,s)}}))}},{key:"triggerKeyPressActiveState",value:function(e,t){var i=document.getElementById("".concat(f[e]).concat(t));i&&(i.classList.add("active"),setTimeout((function(){i.classList.remove("active")}),100))}},{key:"renderKeyboardOctave",value:function(e){var t=this;return Object(d.jsxs)("div",{className:"keyboard__octave",children:[Object(d.jsx)("button",{id:"c".concat(e),onClick:function(){return t.props.onKeyPressed(e,"c")}}),Object(d.jsx)("button",{id:"cSharp".concat(e),onClick:function(){return t.props.onKeyPressed(e,"cSharp")}}),Object(d.jsx)("button",{id:"d".concat(e),onClick:function(){return t.props.onKeyPressed(e,"d")}}),Object(d.jsx)("button",{id:"dSharp".concat(e),onClick:function(){return t.props.onKeyPressed(e,"dSharp")}}),Object(d.jsx)("button",{id:"e".concat(e),onClick:function(){return t.props.onKeyPressed(e,"e")}}),Object(d.jsx)("button",{id:"f".concat(e),onClick:function(){return t.props.onKeyPressed(e,"f")}}),Object(d.jsx)("button",{id:"fSharp".concat(e),onClick:function(){return t.props.onKeyPressed(e,"fSharp")}}),Object(d.jsx)("button",{id:"g".concat(e),onClick:function(){return t.props.onKeyPressed(e,"g")}}),Object(d.jsx)("button",{id:"gSharp".concat(e),onClick:function(){return t.props.onKeyPressed(e,"gSharp")}}),Object(d.jsx)("button",{id:"a".concat(e),onClick:function(){return t.props.onKeyPressed(e,"a")}}),Object(d.jsx)("button",{id:"aSharp".concat(e),onClick:function(){return t.props.onKeyPressed(e,"aSharp")}}),Object(d.jsx)("button",{id:"b".concat(e),onClick:function(){return t.props.onKeyPressed(e,"b")}})]},e)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.numOctaves;t++)e.push(this.renderKeyboardOctave(t+this.props.startingOctave));return Object(d.jsx)("div",{className:"keyboard__container",children:e})}}]),i}(a.a.Component);b.defaultProps={numOctaves:1,startingOctave:1};var p=i(9),m=i(0),j=i(8);i(21);p.a.registerPlugin(j.a);var g=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).state={value:e.initialValue.toFixed(e.precision)},s.calculateRotation=s.calculateRotation.bind(Object(l.a)(s)),s.calculateValue=s.calculateValue.bind(Object(l.a)(s)),s.knobRef=a.a.createRef(),s}return Object(r.a)(i,[{key:"componentDidMount",value:function(){m.c.set(this.knobRef.current,{rotation:this.calculateRotation()}),j.a.create(this.knobRef.current,{type:"rotation",throwProps:!1,edgeResistance:.85,onDrag:this.calculateValue,bounds:{minRotation:-150,maxRotation:150}}),this.draggableInstance=j.a.get(this.knobRef.current)}},{key:"calculateValue",value:function(){var e,t=Math.abs(this.props.minValue-this.props.maxValue),i=this.draggableInstance.rotation/300+.5;i<=0&&(i=0),i>=1&&(i=1),e=(i*parseFloat(t)+this.props.minValue).toFixed(this.props.precision),this.setState({value:e}),this.props.valueChanged&&this.props.valueChanged(parseFloat(e))}},{key:"calculateRotation",value:function(){var e=Math.abs(this.props.minValue-this.props.maxValue);return 300*((this.state.value-this.props.minValue)/e-.5)}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"knob__container",children:[Object(d.jsx)("span",{className:"knob__label",children:this.props.label}),Object(d.jsx)("div",{ref:this.knobRef,className:"knob"}),Object(d.jsxs)("span",{className:"knob__value",children:[this.state.value,this.props.units]})]})}}]),i}(a.a.Component);g.defaultProps={label:"",units:"",precision:2,initialValue:0,minValue:0,maxValue:1};i(22);p.a.registerPlugin(j.a),(function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).state={value:e.initialValue},s.calculateValue=s.calculateValue.bind(Object(l.a)(s)),s.switchRef=a.a.createRef(),s.switchThumbRef=a.a.createRef(),s}return Object(r.a)(i,[{key:"componentDidMount",value:function(){j.a.create(this.switchThumbRef.current,{type:"x",throwProps:!1,bounds:this.switchRef.current,onDrag:this.calculateValue}),this.draggableInstance=j.a.get(this.switchThumbRef.current)}},{key:"calculateValue",value:function(){this.setState({value:this.draggableInstance.x/(this.draggableInstance.minX+this.draggableInstance.maxX)>.5})}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"switch__container",children:[Object(d.jsx)("span",{className:"switch__label",children:this.props.label}),Object(d.jsx)("div",{ref:this.switchRef,className:"switch switch--".concat(this.state.value?"active":"inactive"),children:Object(d.jsx)("div",{ref:this.switchThumbRef,className:"switch__thumb"})})]})}}]),i}(a.a.Component)).defaultProps={label:"",initialValue:!1};var y=function(){function e(){Object(h.a)(this,e),this.settings={master:{level:1},oscillator:{waveForm:"square"},amp:{attack:.1,release:1.5},filter:{cutoff:350,resonance:0,envelope:.25,attack:.1,release:.5},reverb:{level:.25}},this.initializeAudioContext(),this.initializeOscillatorNode(),this.initializeFilterNode(),this.initializeGainNode(),this.initializeReverb(),this.initializeCompressor(),this.oscillatorNode.connect(this.filterNode1),this.filterNode1.connect(this.filterNode2),this.filterNode2.connect(this.reverbNode),this.filterNode2.connect(this.reverbDryGain),this.reverbNode.connect(this.reverbWetGain),this.reverbWetGain.connect(this.volumeNode),this.reverbDryGain.connect(this.volumeNode),this.volumeNode.connect(this.compressorNode),this.compressorNode.connect(this.audioContext.destination),this.oscillatorNode.start()}return Object(r.a)(e,[{key:"setLevel",value:function(e){this.settings.master.level=e}},{key:"setReverb",value:function(e){this.settings.reverb.level=e;var t=Math.cos(.5*e*Math.PI),i=Math.cos(.5*(1-e)*Math.PI);this.reverbDryGain.gain.value=t,this.reverbWetGain.gain.value=i}},{key:"setAmpAttack",value:function(e){this.settings.amp.attack=e+.01}},{key:"setAmpRelease",value:function(e){this.settings.amp.release=e}},{key:"setFilterCutoff",value:function(e){this.settings.filter.cutoff=e}},{key:"setFilterResonance",value:function(e){this.settings.filter.resonance=e}},{key:"setFilterEnvelope",value:function(e){this.settings.filter.envelope=e}},{key:"setFilterAttack",value:function(e){this.settings.filter.attack=e}},{key:"setFilterRelease",value:function(e){this.settings.filter.release=e}},{key:"setWaveForm",value:function(e){this.settings.oscillator.waveForm=e,this.oscillatorNode.type=e}},{key:"initializeAudioContext",value:function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext)}},{key:"initializeOscillatorNode",value:function(){this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.type=this.settings.oscillator.waveForm,this.oscillatorNode.frequency.value=440}},{key:"initializeGainNode",value:function(){this.volumeNode=this.audioContext.createGain(),this.volumeNode.gain.setValueAtTime(0,this.audioContext.currentTime)}},{key:"initializeFilterNode",value:function(){this.filterNode1=this.audioContext.createBiquadFilter(),this.filterNode2=this.audioContext.createBiquadFilter(),this.filterNode1.type="lowpass",this.filterNode2.type="lowpass"}},{key:"initializeReverb",value:function(){var e=this;this.reverbNode=this.audioContext.createConvolver(),this.reverbWetGain=this.audioContext.createGain(),this.reverbDryGain=this.audioContext.createGain();var t=new XMLHttpRequest;t.open("GET","/reverb-impulse-1.wav",!0),t.responseType="arraybuffer",t.onload=function(){e.audioContext.decodeAudioData(t.response,(function(t){e.reverbNode.buffer=t}))},t.send(),this.setReverb(this.settings.reverb.level)}},{key:"initializeCompressor",value:function(){this.compressorNode=this.audioContext.createDynamicsCompressor()}},{key:"triggerFilterEnvelope",value:function(){var e=this.audioContext.currentTime;this.filterNode1.frequency.cancelScheduledValues(e),this.filterNode2.frequency.cancelScheduledValues(e),this.filterNode1.frequency.setValueAtTime(this.filterNode1.frequency.value,e),this.filterNode2.frequency.setValueAtTime(this.filterNode2.frequency.value,e),this.filterNode1.Q.value=this.settings.filter.resonance,this.filterNode2.Q.value=this.settings.filter.resonance,this.filterNode1.frequency.linearRampToValueAtTime(this.settings.filter.cutoff+(15e3-this.settings.filter.cutoff)*this.settings.filter.envelope,e+this.settings.filter.attack),this.filterNode2.frequency.linearRampToValueAtTime(this.settings.filter.cutoff+(15e3-this.settings.filter.cutoff)*this.settings.filter.envelope,e+this.settings.filter.attack),this.filterNode1.frequency.setTargetAtTime(this.settings.filter.cutoff,e+this.settings.filter.attack,this.settings.filter.release/10),this.filterNode2.frequency.setTargetAtTime(this.settings.filter.cutoff,e+this.settings.filter.attack,this.settings.filter.release/10),this.filterNode1.frequency.setValueAtTime(this.settings.filter.cutoff,e+this.settings.filter.attack+this.settings.filter.release),this.filterNode2.frequency.setValueAtTime(this.settings.filter.cutoff,e+this.settings.filter.attack+this.settings.filter.release)}},{key:"triggerAmpEnvelope",value:function(){var e=this.audioContext.currentTime;this.volumeNode.gain.cancelScheduledValues(e),this.volumeNode.gain.setValueAtTime(this.volumeNode.gain.value,e),this.volumeNode.gain.linearRampToValueAtTime(this.settings.master.level,e+this.settings.amp.attack),this.volumeNode.gain.setTargetAtTime(0,e+this.settings.amp.attack,this.settings.amp.release/10),this.volumeNode.gain.setValueAtTime(0,e+this.settings.amp.attack+this.settings.amp.release)}},{key:"playTone",value:function(e){this.oscillatorNode.frequency.value=e,this.triggerFilterEnvelope(),this.triggerAmpEnvelope()}}]),e}(),O=function e(t){Object(h.a)(this,e),this.b=t*Math.pow(2,2/12),this.aSharp=t*Math.pow(2,1/12),this.a=t,this.gSharp=t*Math.pow(2,-1/12),this.g=t*Math.pow(2,-2/12),this.fSharp=t*Math.pow(2,-.25),this.f=t*Math.pow(2,-4/12),this.e=t*Math.pow(2,-5/12),this.dSharp=t*Math.pow(2,-.5),this.d=t*Math.pow(2,-7/12),this.cSharp=t*Math.pow(2,-8/12),this.c=t*Math.pow(2,-.75)},k=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).state={started:!1,waveForm:"square",startingOctave:3},s.initializeScale(),s.start=s.start.bind(Object(l.a)(s)),s.setLevel=s.setLevel.bind(Object(l.a)(s)),s.setReverb=s.setReverb.bind(Object(l.a)(s)),s.setAmpAttack=s.setAmpAttack.bind(Object(l.a)(s)),s.setAmpRelease=s.setAmpRelease.bind(Object(l.a)(s)),s.setFilterCutoff=s.setFilterCutoff.bind(Object(l.a)(s)),s.setFilterResonance=s.setFilterResonance.bind(Object(l.a)(s)),s.setFilterEnvelope=s.setFilterEnvelope.bind(Object(l.a)(s)),s.setFilterAttack=s.setFilterAttack.bind(Object(l.a)(s)),s.setFilterRelease=s.setFilterRelease.bind(Object(l.a)(s)),s.setWaveForm=s.setWaveForm.bind(Object(l.a)(s)),s.onKeyPressed=s.onKeyPressed.bind(Object(l.a)(s)),s}return Object(r.a)(i,[{key:"start",value:function(){this.setState({started:!0}),this.synthEngine=new y}},{key:"initializeScale",value:function(){this.scale=[];for(var e=-4;e<6;e++){var t=440*Math.pow(2,e),i=new O(t);this.scale.push(i)}}},{key:"setLevel",value:function(e){this.synthEngine.setLevel(e)}},{key:"setReverb",value:function(e){this.synthEngine.setReverb(e)}},{key:"setAmpAttack",value:function(e){this.synthEngine.setAmpAttack(e)}},{key:"setAmpRelease",value:function(e){this.synthEngine.setAmpRelease(e)}},{key:"setFilterCutoff",value:function(e){this.synthEngine.setFilterCutoff(e)}},{key:"setFilterResonance",value:function(e){this.synthEngine.setFilterResonance(e)}},{key:"setFilterEnvelope",value:function(e){this.synthEngine.setFilterEnvelope(e)}},{key:"setFilterAttack",value:function(e){this.synthEngine.setFilterAttack(e)}},{key:"setFilterRelease",value:function(e){this.synthEngine.setFilterRelease(e)}},{key:"setWaveForm",value:function(e){this.setState({waveForm:e}),this.synthEngine.setWaveForm(e)}},{key:"onKeyPressed",value:function(e,t){this.synthEngine.playTone(this.scale[e][t])}},{key:"setStartingOctave",value:function(e){this.setState({startingOctave:e})}},{key:"render",value:function(){var e=this;return this.state.started?Object(d.jsxs)("div",{className:"synth",children:[Object(d.jsxs)("div",{className:"flex justify-center",children:[Object(d.jsxs)("div",{className:"synth__controls",children:[Object(d.jsxs)("div",{className:"flex justify-center",children:[Object(d.jsxs)("div",{className:"section section__octave-buttons",children:[Object(d.jsx)("span",{className:"section__label",children:"Octave"}),Object(d.jsx)(v,{disabled:7===this.state.startingOctave,onClick:function(){return e.setStartingOctave(e.state.startingOctave+1)},"aria-label":"up",children:"\u25b3"}),Object(d.jsx)(v,{disabled:0===this.state.startingOctave,onClick:function(){return e.setStartingOctave(e.state.startingOctave-1)},"aria-label":"down",children:"\u25bd"})]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("span",{className:"section__label",children:"Master"}),Object(d.jsx)(g,{label:"Level",precision:2,initialValue:1,minValue:0,maxValue:1,valueChanged:this.setLevel}),Object(d.jsx)(g,{label:"Reverb",precision:2,initialValue:.25,minValue:0,maxValue:1,valueChanged:this.setReverb})]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("span",{className:"section__label",children:"Amp Envelope"}),Object(d.jsx)(g,{label:"Attack",units:"s",precision:2,initialValue:.1,minValue:.01,maxValue:10,valueChanged:this.setAmpAttack}),Object(d.jsx)(g,{label:"Release",units:"s",precision:2,initialValue:1.5,minValue:.1,maxValue:10,valueChanged:this.setAmpRelease})]})]}),Object(d.jsxs)("div",{className:"flex justify-center",children:[Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("span",{className:"section__label",children:"Filter Envelope"}),Object(d.jsx)(g,{label:"Attack",units:"s",precision:2,initialValue:.1,minValue:.01,maxValue:10,valueChanged:this.setFilterAttack}),Object(d.jsx)(g,{label:"Release",units:"s",precision:2,initialValue:.5,minValue:.01,maxValue:10,valueChanged:this.setFilterRelease})]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("span",{className:"section__label",children:"Filter"}),Object(d.jsx)(g,{label:"Cutoff",units:"Hz",precision:0,initialValue:350,minValue:20,maxValue:15e3,valueChanged:this.setFilterCutoff}),Object(d.jsx)(g,{label:"Resonance",precision:2,initialValue:0,minValue:0,maxValue:10,valueChanged:this.setFilterResonance}),Object(d.jsx)(g,{label:"Envelope",precision:2,initialValue:.25,minValue:0,maxValue:1,valueChanged:this.setFilterEnvelope})]})]})]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("span",{className:"section__label",children:"Waveform"}),Object(d.jsx)(v,{disabled:"sine"===this.state.waveForm,onClick:function(){return e.setWaveForm("sine")},children:"Sine"}),Object(d.jsx)(v,{disabled:"square"===this.state.waveForm,onClick:function(){return e.setWaveForm("square")},children:"Square"}),Object(d.jsx)(v,{disabled:"triangle"===this.state.waveForm,onClick:function(){return e.setWaveForm("triangle")},children:"Triangle"}),Object(d.jsx)(v,{disabled:"sawtooth"===this.state.waveForm,onClick:function(){return e.setWaveForm("sawtooth")},children:"Sawtooth"})]})]}),Object(d.jsx)(b,{numOctaves:2,startingOctave:this.state.startingOctave,onKeyPressed:this.onKeyPressed})]}):Object(d.jsx)(v,{onClick:this.start,children:"Click To Begin"})}}]),i}(a.a.Component),x=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,24)).then((function(t){var i=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,c=t.getTTFB;i(e),s(e),a(e),n(e),c(e)}))};c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(k,{})}),document.getElementById("root")),x()}],[[23,1,2]]]);
//# sourceMappingURL=main.b23043b8.chunk.js.map